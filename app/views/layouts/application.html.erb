<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Viddler Recorder</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
	  <%= stylesheet_link_tag    "application" %>
	  <%= csrf_meta_tags %>

    <style type="text/css">
      body {
        padding-top: 60px;
      }

			ul.media-grid p {
				margin-left: 20px;
			}
    </style>

		<%= javascript_include_tag "application" %>
		<script src="http://cdn-static.viddler.com/js/viddler.js" type="text/javascript"></script>
		
		<script>
			$(function() {
				$('#videos').load('<%= list_videos_path %>');
			});
		</script>
		
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  </head>

  <body>

    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="#">Viddler <span class="label important">Recorder</span></a>
          <ul class="nav">
            <li>
							<a href="#about" data-controls-modal="modal-about" data-backdrop="static">About</a>
							<div id="modal-about" class="modal hide fade in">
								<div class="modal-header">
									<a href="#" class="close">×</a>
									<h3>About Viddler Recorder</h3>
								</div>
								<div class="modal-body">
									<p>Prototype to demonstrate easy video upload and recording of videos.</p>
								</div>
							</div>
						</li>
            <li>
							<%= mail_to "jfesslmeier@b-vision.com", "Contact", :encode => "javascript" %>
						</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>Broadcast Thiself</h1>
        <p>Record your video right from the tip of your touch pad.</p>
        <p>
					<a class="btn primary large" data-controls-modal="modal-uploader" data-backdrop="static">Record &raquo;</a>
					<% if false %>
					&nbsp;or&nbsp;
					<a class="btn secondary large" data-controls-modal="modal-uploader" data-backdrop="static">Upload &raquo;</a>
					<% end %>
				</p>
				<div id="modal-uploader" class="modal hide fade in">
					<div class="modal-header">
						<a href="#" class="close">×</a>
						<h3>Live Recorder</h3>
					</div>
					<div class="modal-body">
						<p>
							<%
								width = 525
								height = 436
							%>
							<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"  codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="<%= width %>" height="<%= height %>" id="viddler_recorder" align="middle"> 
								<param name="allowScriptAccess" value="always" /> 
								<param name="allowNetworking" value="all" /> 
								<param name="movie" value="http://cdn-static.viddler.com/flash/recorder.swf" /> 
								<param name="quality" value="high" /> 
								<param name="scale" value="noScale"> 
								<param name="bgcolor" value="#000000" /> 
								<param name="flashvars" value="fake=1&recordToken=<%= @record_token %>" /> 
								<embed src="http://cdn-static.viddler.com/flash/recorder.swf" quality="high" scale="noScale" bgcolor="#000000" allowScriptAccess="always" allowNetworking="all" width="<%= width %>" height="<%= height %>" name="viddler_recorder" flashvars="fake=1&recordToken=<%= @record_token %>" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
							</object>
							<script>
								function recordDone(username,user_video_number,video_id) {
									$('#videos').load('<%= list_videos_path %>');
									$("#modal-uploader").modal('hide');
								}

								function recordStopped() {
									$("#modal-uploader").modal('hide');
								}
							</script>
						</p>
					</div>
				</div>
      </div>

      <h2>Latest Videos</h2>
			<ul id="videos" class="media-grid">
				<li><p>Loading...<p></li>
			</ul>
      <footer>
        <p>&copy; Business Vision 2011</p>
      </footer>

    </div> <!-- /container -->

  </body>
</html>